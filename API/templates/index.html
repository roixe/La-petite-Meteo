<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="{{ url_for('static', filename='styles/style.css') }}" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>La petite météo</title>
</head>

<body>

    <div class="container-fluid">
        <div class="row "><img class="img-fluid mx-auto" style="max-width: 512px" src="{{ url_for('static',filename='images/logo.png') }}" /></div>
        <div class="row"><small>Live le {{ date_time }}</small></div>
    </div>

    <nav class="navbar rounded shadow">
        <div class="container-fluid justify-content-center">
            <a class="navbar-brand" href="">Accueil</a>
            <a class="navbar-brand" href="{{ url_for('sondes') }}">Gestion des sondes</a>
        </div>
    </nav>

    <div class="container-fluid mx-auto">
        <div class="p-3">
            <div class="border rounded shadow p-2">
                <h5 class="font-bold uppercase text-gray-500">Dernières mesures de températures</h5>
                <div class="box">
                    <canvas id="temperature"></canvas>
                </div>
            </div>
        </div>

        <div class="p-3">
            <div class="border rounded shadow p-2">
                    <h5 class="font-bold uppercase text-gray-500">Dernières mesures d'humidité</h5>
                    <div class="box">
                        <canvas id="humidite"></canvas>
                    </div>
            </div>
        </div>

        <div class="p-3">
            <div class="border rounded shadow p-2">
                <h5>Qualité de l'air</h5>
                <h3 class="text-center" style="color: {{ air [2] }};">{{ air[0] }} - {{ air[1] }}</h3>
            </div>
        </div>

        <!--Divider-->
        <hr class="border-b-2 border-gray-600">

        <div class="p-3">
            <div class="border rounded shadow p-2">
                <h5>Pollens</h5>
                <div class="table-responsive">
                    <table class="table">
                    <tbody>                          
                        <tr>
                            <td class="col-2">Peuplier</td>
                            <td class="col-2">1/5</td>
                        </tr>                                
                        <tr>
                            <td class="col-2">Noisetier</td>
                            <td class="col-2">1/5</td>
                        </tr>                                
                        <tr>
                            <td class="col-2">Frêne</td>
                            <td class="col-2">1/5</td>
                        </tr>                                
                        <tr>
                            <td class="col-2">Cupressacées</td>
                            <td class="col-2">1/5</td>
                        </tr>                                
                        <tr>
                            <td class="col-2">Aulne</td>
                            <td class="col-2">2/5</td>
                        </tr>
                    </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="p-3">
            <div class="border rounded shadow p-2">
                <h5>Pluie à venir</h5>
                <div class="table-responsive">
                    <table class="table">
                    <tbody>
                        <tr>
                            <td class="col-2">Dans 1h</td>
                            <td class="col-2">0%</td>
                        </tr>
                        <tr>
                            <td class="col-2">Dans 2h</td>
                            <td class="col-2">0%</td>
                        </tr>
                        <tr>
                            <td class="col-2">Dans 4h</td>
                            <td class="col-2">0%</td>
                        </tr>
                        <tr>
                            <td class="col-2">Dans 8h</td>
                            <td class="col-2">0%</td>
                        </tr>
                        <tr>
                            <td class="col-2">Dans 12h</td>
                            <td class="col-2">0%</td>
                        </tr>
                    </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="p-3">
            <div class="bg-white border rounded shadow p-2">
                <h5>Prévisions 7j</h5>
                <div class="table-responsive">
                    <table class="table">
                        <tbody>
                            <tr>
                                <td class="col-2">Aujourd'hui</td>
                                <td class="col-2">0/0</td>
                            </tr>
                            {% for day in days %}
                            <tr>
                                <td class="col-2">{{ day.strftime('%A %d/%m') }}</td>
                                <td class="col-2">0/0</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div id="ww_0ab450d3b58de" v='1.3' loc='auto' a='{"t":"ticker","lang":"fr","sl_lpl":1,"ids":[],"font":"Arial","sl_ics":"one_a","sl_sot":"celsius","cl_bkg":"image","cl_font":"#FFFFFF","cl_cloud":"#FFFFFF","cl_persp":"#81D4FA","cl_sun":"#FFC107","cl_moon":"#FFC107","cl_thund":"#FF5722"}'>
        Plus de prévisions: 
        <a href="https://oneweather.org/fr/paris/25_days/" id="ww_0ab450d3b58de_u" target="_blank">Previsions meteo 25 jours</a>
    </div>
    <script async src="https://app2.weatherwidget.org/js/?id=ww_0ab450d3b58de"></script>


    <footer class="bg-gray-900 shadow p-3">
        <div class="container-fluid py-8">
            <h3 class="font-bold font-bold text-gray-100">A propos</h3>
            <p class="py-4 text-gray-200 text-sm">
                <strong>Copyright &copy; 2024 (<a href="">v1</a>)</strong><br />
                Merci de ne pas utiliser les données du site. Elles sont fournies à titre indicatif et sont strictement liées au lieu géographique de celle-ci.
            </p>
            <style>
            .list-reset li {
                display: inline-block;
                margin-right: 10px; 
            }
            </style>
            <h3 class="font-bold font-bold text-gray-100">Reseaux Sociaux</h3>
            <ul class="list-reset pt-3">
            <li>
                <a class="inline-block text-gray-600 no-underline hover:text-gray-100 hover:text-underline py-1" href="https://www.facebook.com/lapetitemeteo/" target="_blank">
                <img class="img-fluid pad" src="{{ url_for('static',filename='images/facebook.png') }}" alt="facebook" width="32px" />
                </a>
            </li>
            <li>
                <a class="inline-block text-gray-600 no-underline hover:text-gray-100 hover:text-underline py-1" href="https://www.instagram.com/lapetitemeteo/" target="_blank">
                <img class="img-fluid pad" src="{{ url_for('static',filename='images/instagram.jpg') }}" alt="instagram" width="32px" />
                </a>
            </li>
            <li>
                <a class="inline-block text-gray-600 no-underline hover:text-gray-100 hover:text-underline py-1" href="https://www.twiter.com/lapetitemeteo/" target="_blank">
                <img class="img-fluid pad" src="{{ url_for('static',filename='images/twiter.png') }}" alt="twitter" width="32px" />
                </a>
            </li>
            </ul>
        </div>
    </footer>
        
    <script>
        const labels = {{ labels | tojson }};
        const data_temperature = {
            labels: labels,
            datasets: [{
                label: 'Températures',
                borderColor: 'rgb(255, 99, 132)',
                data:  {{ temperatures | tojson }},
            }]
        };

        const data_humidite = {
            labels: labels,
            datasets: [{
                label: 'Humidité',
                borderColor: 'rgb(128, 42, 126)',
                data:  {{ humidite | tojson }},
            }]
        };

        const config_temperature = {
            type: 'line',
            data: data_temperature,
            options: { 
                maintainAspectRatio: false ,
            }
        };

        const config_humidite = {
            type: 'line',
            data: data_humidite,
            options: { 
                maintainAspectRatio: false ,
            }
        };

        const chart_temperature = new Chart(
            document.getElementById('temperature'),
            config_temperature
        );

        const chart_humidite = new Chart(
            document.getElementById('humidite'),
            config_humidite
        );
    </script>
</body>
</html>

